<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Functions to lazily obtain elements from cartesian products, including random samples. Partial wrapper of the `lazy-cartesian-product` C++ library (&lt;https://github.com/tylerburdsall/lazy-cartesian-product&gt;).">
<title>R Interface for Lazy Cartesian Products • rlazycartesian</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Interface for Lazy Cartesian Products">
<meta property="og:description" content="Functions to lazily obtain elements from cartesian products, including random samples. Partial wrapper of the `lazy-cartesian-product` C++ library (&lt;https://github.com/tylerburdsall/lazy-cartesian-product&gt;).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rlazycartesian</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/arcruz0/rlazycartesian/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rlazycartesian">
<code>rlazycartesian</code><a class="anchor" aria-label="anchor" href="#rlazycartesian"></a>
</h1></div>
<p>v0.2 | <a href="https://arcruz0.github.io/extra/rlazycartesian/" class="external-link">[<strong>Documentation</strong>]</a></p>
<p>An R interface for Lazy Cartesian Products. Provides memory-efficient ways to obtain elements (including random samples) from Cartesian Products. Partial wrapper of the <a href="https://github.com/tylerburdsall/lazy-cartesian-product" class="external-link"><code>lazy-cartesian-product</code></a> C++ library (Burdsall, 2018).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> <span class="co"># if not installed</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"arcruz0/rlazycartesian"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Suppose you need a random sample of 1,000 elements from a Cartesian Product of 125M elements. <code>rlazycartesian</code> can do this without generating all elements in advance (as <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid()</a></code> would do). This makes it so that the operation is fast and consumes very little RAM—see <a href="#benchmarks">Benchmarks</a> below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/arcruz0/rlazycartesian" class="external-link">rlazycartesian</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">500</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>          y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">500</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>          z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">500</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/lazy_cartesian.html">lazy_cartesian</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span></span>
<span><span class="va">lc</span></span>
<span><span class="co">#&gt; `lazy_cartesian` object with 1.25e+08 elements</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="reference/get_random_sample.html">get_random_sample</a></span><span class="op">(</span><span class="va">lc</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   .element    x    y    z</span></span>
<span><span class="co">#&gt; 1 66608964 x267 y218 z464</span></span>
<span><span class="co">#&gt; 2 44492929 x178 y486 z429</span></span>
<span><span class="co">#&gt; 3 60941821 x244 y384 z321</span></span>
<span><span class="co">#&gt; 4 30845227 x124 y191 z227</span></span>
<span><span class="co">#&gt; 5 17633234  x71 y267 z234</span></span>
<span><span class="co">#&gt; 6 79310131 x318 y121 z131</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-note-on-element-indices-and-expandgrid">A note on element indices and <code>expand.grid()</code>
<a class="anchor" aria-label="anchor" href="#a-note-on-element-indices-and-expandgrid"></a>
</h2>
<p>Element indices from <code>rlazycartesian</code> are equivalent to indices from a sorted <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_elements.html">get_elements</a></span><span class="op">(</span><span class="va">lc</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12345</span>, <span class="fl">98765</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   .element  x    y    z</span></span>
<span><span class="co">#&gt; 1    12345 x1  y25 z345</span></span>
<span><span class="co">#&gt; 2    98765 x1 y198 z265</span></span>
<span></span>
<span><span class="va">eg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span></span>
<span><span class="va">eg</span> <span class="op">&lt;-</span> <span class="va">eg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">eg</span><span class="op">$</span><span class="va">x</span>, <span class="va">eg</span><span class="op">$</span><span class="va">y</span>, <span class="va">eg</span><span class="op">$</span><span class="va">z</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">eg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">eg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12345</span>, <span class="fl">98765</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;        x    y    z</span></span>
<span><span class="co">#&gt; 12345 x1  y25 z345</span></span>
<span><span class="co">#&gt; 98765 x1 y198 z265</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="benchmarks">Benchmarks<a class="anchor" aria-label="anchor" href="#benchmarks"></a>
</h2>
<p>For the random sample example above, compare performance (<code>Elapsed_Time_sec</code>) and peak RAM usage (<code>Peak_RAM_Used_MiB</code>):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">peakRAM</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/peakRAM/man/peakRAM.html" class="external-link">peakRAM</a></span><span class="op">(</span></span>
<span>  <span class="op">{</span><span class="va">lc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/lazy_cartesian.html">lazy_cartesian</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span>; <span class="fu"><a href="reference/get_random_sample.html">get_random_sample</a></span><span class="op">(</span><span class="va">lc</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">}</span>,</span>
<span>  <span class="op">{</span><span class="va">eg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span><span class="va">l</span><span class="op">)</span>; <span class="va">eg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eg</span><span class="op">)</span>, <span class="fl">1000</span><span class="op">)</span>,<span class="op">]</span><span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;                                       Function_Call Elapsed_Time_sec</span></span>
<span><span class="co">#&gt; 1 {lc&lt;-lazy_cartesian(l)get_random_sample(lc,1000)}            0.002</span></span>
<span><span class="co">#&gt; 2  {eg&lt;-expand.grid(l)eg[sample(1:nrow(eg),1000),]}            4.332</span></span>
<span><span class="co">#&gt;   Total_RAM_Used_MiB Peak_RAM_Used_MiB</span></span>
<span><span class="co">#&gt; 1                  0               0.2</span></span>
<span><span class="co">#&gt; 2                  0            2862.1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="restrictions-to-the-cartesian-product">Restrictions to the Cartesian product<a class="anchor" aria-label="anchor" href="#restrictions-to-the-cartesian-product"></a>
</h2>
<p>Starting in v0.2, <code>rlazycartesian</code> supports simple restrictions to the Cartesian product. For example, suppose that in the following Cartesian product we want to exclude any elements with “Red” and “Circle,” as well as any elements with “Square” and the numbers 1 or 3:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span><span class="op">)</span>,</span>
<span>          shape  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Square"</span>, <span class="st">"Circle"</span><span class="op">)</span>,</span>
<span>          number <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  restriction1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Red"</span>, shape <span class="op">=</span> <span class="st">"Circle"</span><span class="op">)</span>,</span>
<span>  restriction2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"Square"</span>, number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/lazy_cartesian.html">lazy_cartesian</a></span><span class="op">(</span><span class="va">l</span>, restrictions <span class="op">=</span> <span class="va">r</span><span class="op">)</span></span>
<span><span class="va">lc</span></span>
<span><span class="co">#&gt; `lazy_cartesian` object with 9 elements (after restrictions)</span></span>
<span><span class="co">#&gt;   =&gt; 2 restrictions excluded 50% of the Cartesian Product </span></span>
<span><span class="co">#&gt;      (which originally had 18 elements)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_random_sample.html">get_random_sample</a></span><span class="op">(</span><span class="va">lc</span>, <span class="fl">9</span><span class="op">)</span> <span class="co"># (note element indices still go up to 18)</span></span>
<span><span class="co">#&gt;   .element  color  shape number</span></span>
<span><span class="co">#&gt; 1       17 Yellow Circle      2</span></span>
<span><span class="co">#&gt; 2       16 Yellow Circle      1</span></span>
<span><span class="co">#&gt; 3        8   Blue Square      2</span></span>
<span><span class="co">#&gt; 4       18 Yellow Circle      3</span></span>
<span><span class="co">#&gt; 5       10   Blue Circle      1</span></span>
<span><span class="co">#&gt; 6       12   Blue Circle      3</span></span>
<span><span class="co">#&gt; 7       14 Yellow Square      2</span></span>
<span><span class="co">#&gt; 8       11   Blue Circle      2</span></span>
<span><span class="co">#&gt; 9        2    Red Square      2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Burdsall, T. (2018). <code>lazy-cartesian-product</code>: .hpp library to efficiently generate combinations using the Lazy Cartesian Product algorithm. <a href="https://github.com/tylerburdsall/lazy-cartesian-product" class="external-link uri">https://github.com/tylerburdsall/lazy-cartesian-product</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/arcruz0/rlazycartesian/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/arcruz0/rlazycartesian/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rlazycartesian</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andrés Cruz <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrés Cruz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
